<!DOCTYPE html>
<html lang="en">
	<head>
		<link rel="stylesheet" href="ace.css">
		<title>ACE in Action</title>
		<style type="text/css" media="screen">
			#editor{
				position:	absolute;
				top:		70px;
				right:		50px;
				bottom:		50px;
				left:		50px;
			}
		</style>
		<script src="backend.js" type="text/javascript" charset="utf-8"></script>
	</head>
	<body>
		<h3 id="whichEditor"> ACE </h3>
		<h1 id="title">DMD - Spike2 - Python</h1>
<!--This next section needs to be non-indented since python is tabulation-sensitive-->
<div id="editor">def my_function():
	print("Hello from a function")
</div>
		
		<script src="ace.js" type="text/javascript" charset="utf-8"></script>
		<script>
			var editor = ace.edit("editor");
			editor.setTheme("ace/theme/monokai");
			editor.session.setMode("ace/mode/python");
		</script>
		
		<script type="text/javascript">
			//Function to extract code
			var runit=function(){
				var code=editor.getValue();
				var formData=new FormData();
				var codeBlob=new Blob([code],{type:"text/plain"});
				console.log("codeblob:\n"+
					"size: "+codeBlob.size+"\n"+
					"type: "+codeBlob.type+"\n");
				formData.set("code",codeBlob,"thefile");
				
				console.log("Sending:\n"+
					code);
				
				httpPostAsync("./echoFile.php",function(responseText){
					console.log("Response:\n"
						+responseText+"\n");
				},formData);
			}
		</script>
		<button onclick="runit()" type="button">Run!</button>
	</body>
</html>
